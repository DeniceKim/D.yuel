@use './../common/variable' as vars;
@use './../common/mixin' as mixin;
@use 'sass:map';
@use 'sass:color';
@use 'sass:list';

// Input & Textarea
.c-inptype,
.c-texttype {
  --cinp-height: 2.125rem;
  --cinp-height-xxl: 3rem;
  --cinp-height-xl: 2.5rem;
  --cinp-padding-vertical: calc((var(--cinp-height) - 1.5 * var(--cinp-font-size)) / 2);
  --cinp-padding-vertical-xxl: calc((var(--cinp-height-xxl) - 1.5 * var(--cinp-font-size-xxl)) / 2);
  --cinp-padding-vertical-xl: calc((var(--cinp-height-xl) - 1.5 * var(--cinp-font-size-xl)) / 2);
  --cinp-padding: 0.5rem;
  --cinp-padding-left: 0.5rem;
  --cinp-padding-right: 0.5rem;
  --cinp-border-color: var(--lightgray);
  --cinp-border-radius: 0.1875rem;
  --cinp-focus-border-color: var(--black);
  --cinp-bg-color: rgba(255, 255, 255, 1);
  --cinp-font-size: 0.875rem;
  --cinp-font-size-xxl: 1.125rem;
  --cinp-font-size-xl: 1rem;
  --cinp-font-weight: 400;
  --cinp-bezier: cubic-bezier(0.4, 0, 0.2, 1);
  --clabel-width: 4.0625rem;

  display: flex;
  flex-wrap: wrap;
  position: relative;
  width: 100%;
  // 사이즈
  &.xxl{
    .c-inp-el {
      padding: var(--cinp-padding-vertical-xxl) var(--cinp-padding);
    }
  }
  &.xl{
    .c-inp-el {
      padding: var(--cinp-padding-vertical-xl) var(--cinp-padding);
    }
  }
  // 형태
  &.round{
    .c-inp-el {
      border-radius: calc(var(--cinp-height) / 2);
    }
    &.xxl{
      .c-inp-el {
        border-radius: calc(var(--cinp-height-xxl) / 2);
      }
    }
    &.xl{
      .c-inp-el {
        border-radius: calc(var(--cinp-height-xl) / 2);
      }
    }
  }
  // 상태
  &.error{
    .c-inp-el {
      border-color: var(--error);
      &:has(.c-inp:focus,.c-textarea:focus) {
        border-color: var(--error);
      }
    }
    .feedback{
      padding-left:calc(var(--clabel-width) + var(--space));
    }
  }
  // 세로방향
  &.vertical{
    .c-label{
      width:100%;
      min-width: 100%;
      + .c-inp-el{
        margin-left: 0;
      }
    }
    &.error{
      .feedback{
        padding-left:0;
      }
    }
  }
}
.c-inp-el {
  overflow: hidden;
  display: inline-flex;
  align-items: center;
  flex-grow: 1;
  position: relative;
  z-index: auto;
  min-width:0;
  max-width: 100%;
  padding: var(--cinp-padding-vertical) var(--cinp-padding);
  border: 1px solid var(--cinp-border-color);
  border-radius: var(--cinp-border-radius);
  transition: border-color 0.3s var(--cinp-bezier), background-color 0.3s var(--cinp-bezier);
  &:has(.c-inp:focus,.c-textarea:focus) {
    border-color: var(--cinp-focus-border-color);
  }
  &:has(.c-inp:disabled,.c-inp[disabled],.c-textarea:disabled,.c-textarea[disabled]) {
    @include mixin.disabled;
  }
  &:has(.c-inp[readonly],.c-textarea[readonly]) {
    @include mixin.readonly;
    border-color:var(--silver);
  }
  .icon{
    width:1.25rem;
    height:1.25rem;
  }
  .c-icon{
    display:inline-flex;
    flex:none;
    width:1.25rem;
    height:1.25rem;
    &.icon{
      width:100%;
      height:100%;
    }
    + input{
      margin-left: .25rem;
    }
  }
  .unit{
    font-size: var(--num-14);
  }
  input + .icon{
    margin-left: .25rem;
  }
  .unit + input,
  input + .unit{
    margin-left: .25rem;
  }
}
// input
.c-inp {
  display: inline-flex;
  width: 100%;
  outline: none;
  line-height: 1.5;
  background-color: transparent;
  font-size: var(--cinp-font-size);
  font-weight: var(--cinp-font-weight);
  transition: background-color 0.3s var(--cinp-bezier);
  &[type=date]::-webkit-calendar-picker-indicator,
  &[type=time]::-webkit-calendar-picker-indicator{
    position:absolute;
    top:0;
    right:4px;
    width:calc(100% - 12px);
    background-position-x:calc(100% - 3px);
  }
}
// textarea
.c-textarea{
  display: inline-flex;
  width: 100%;
  padding-right:calc(1.25rem + var(--cinp-padding-right));
  line-height: 1.5;
  background-color: transparent;
  font-size: var(--cinp-font-size);
  font-weight: var(--cinp-font-weight);
  transition: background-color 0.3s var(--cinp-bezier);
  + .clear-btn{
    align-self: flex-start;
    position:absolute;top:var(--cinp-padding-vertical);right: var(--cinp-padding-right);
  }
}
.exceeded{
  display:none;
}
.c-inp-word-count{
  position:absolute;bottom:0;right:var(--cinp-padding-right);
  color:var(--gray);
  font-size:var(--num-14);
  &.exceeded {
    display:block;
  }
}
.c-inp,
.c-textarea{
  &:disabled,
  &[disabled]{
    @include mixin.disabled;
    ~.clear-btn{display:none;}
  }
}
.c-inp,
.c-textarea{
  &[readonly]{
    ~.clear-btn{display:none;}
  }
}